# RDF Mapping Configuration for PyEuropePMC Data Models
#
# This file is the SOURCE OF TRUTH for all RDF mappings.
# The RML file (rml_mappings.ttl) is auto-generated from this YAML.
#
# After editing this file, run: python scripts/sync_rdf_mappings.py
#
# This file defines how entity fields map to RDF predicates.
# URI generation patterns are handled dynamically in RDFMapper._generate_entity_uri()
# (DOI-based for papers, ORCID-based for authors, ROR-based for institutions, etc.)

# Namespace prefixes
_@prefix:
  ex: "http://example.org/"
  dcterms: "http://purl.org/dc/terms/"
  foaf: "http://xmlns.com/foaf/0.1/"
  bibo: "http://purl.org/ontology/bibo/"
  prov: "http://www.w3.org/ns/prov#"
  rdfs: "http://www.w3.org/2000/01/rdf-schema#"
  nif: "http://persistence.uni-leipzig.org/nlp2rdf/ontologies/nif-core#"
  rdf: "http://www.w3.org/1999/02/22-rdf-syntax-ns#"
  owl: "http://www.w3.org/2002/07/owl#"
  mesh: "http://id.nlm.nih.gov/mesh/"
  obo: "http://purl.obolibrary.org/obo/"
  org: "http://www.w3.org/ns/org#"
  cito: "http://purl.org/spar/cito/"
  datacite: "http://purl.org/spar/datacite/"
  geo: "http://www.w3.org/2003/01/geo/wgs84_pos#"
  ror: "https://ror.org/vocab#"
  skos: "http://www.w3.org/2004/02/skos/core#"

# Knowledge Graph Structure Configuration
# Controls how entities are organized in RDF graphs
_kg_structure:
  # Default behavior for including content entities (sections, references, tables, figures)
  # Set to false for metadata-only graphs, true for complete graphs
  include_content: true
  # Default KG type: "complete" (all entities), "metadata" (papers/authors/institutions only), "content" (sections/references/tables/figures only)
  default_type: "complete"

# ScholarlyWorkEntity mapping (base class)
ScholarlyWorkEntity:
  rdf:type: ["bibo:Document"]
  fields:
    title: dcterms:title
    doi: bibo:doi
    volume: bibo:volume
    pages: bibo:pages
    publication_year: dcterms:issued  # More specific than dcterms:date for year
    publication_date: dcterms:date    # Full date gets dcterms:date
    pmcid: dcterms:identifier
    pmid: ex:pmid
    semantic_scholar_id: ex:semanticScholarId
    journal: bibo:journalTitle
  # Multi-value fields (authors can be list or string)
  multi_value_fields:
    authors: dcterms:creator

# PaperEntity mapping
PaperEntity:
  rdf:type: ["bibo:AcademicArticle"]
  fields:
    issue: bibo:issue
    pub_date: dcterms:issued  # Legacy field, use dcterms:issued for consistency
    abstract: dcterms:abstract
    citation_count: cito:citationCount  # Use CiTO ontology for citations
    influential_citation_count: ex:influentialCitationCount
    is_oa: ex:isOpenAccess
    oa_status: ex:openAccessStatus
    oa_url: ex:openAccessUrl
    reference_count: ex:referenceCount
    cited_by_count: ex:citedByCount
    publisher: dcterms:publisher  # Use dcterms:publisher instead of bibo:publisher for consistency
    issn: bibo:issn
    publication_type: bibo:DocumentType
    first_page: bibo:pageStart
    last_page: bibo:pageEnd
    semantic_scholar_corpus_id: ex:semanticScholarCorpusId
    openalex_id: ex:openAlexId
  # Multi-value fields (lists)
  multi_value_fields:
    keywords: dcterms:subject
    fields_of_study: dcterms:subject
    funders: foaf:fundedBy  # Use FOAF vocabulary for funding relationships
    related_works: ex:relatedWork
  # Relationships
  relationships:
    authors:
      predicate: dcterms:creator
      inverse: foaf:made
    sections:
      predicate: dcterms:hasPart
      inverse: dcterms:isPartOf
    references:
      predicate: cito:cites
      inverse: cito:isCitedBy
    tables:
      predicate: dcterms:hasPart
      inverse: dcterms:isPartOf

# AuthorEntity mapping
AuthorEntity:
  rdf:type: ["foaf:Person"]
  fields:
    full_name: foaf:name
    first_name: foaf:givenName
    last_name: foaf:familyName
    initials: foaf:initials
    orcid: datacite:orcid
    openalex_id: ex:openAlexId
    semantic_scholar_id: ex:semanticScholarId
    affiliation_text: ex:affiliation
    position: ex:authorPosition
    email: foaf:mbox
  # Multi-value fields
  multi_value_fields:
    sources: prov:hadPrimarySource
  # Relationships
  relationships:
    papers:
      predicate: foaf:made
      inverse: dcterms:creator
    institutions:
      predicate: org:memberOf
      inverse: org:hasMember

# SectionEntity mapping
SectionEntity:
  rdf:type: ["bibo:DocumentPart", "nif:Context"]
  fields:
    title: dcterms:title
    content: nif:isString
    begin_index: nif:beginIndex
    end_index: nif:endIndex
  # Relationships
  relationships:
    paper:
      predicate: dcterms:isPartOf
      inverse: dcterms:hasPart
    subsections:
      predicate: dcterms:hasPart
      inverse: dcterms:isPartOf  # TODO: Implement SubsectionEntity or remove if not needed

# TableEntity mapping
TableEntity:
  rdf:type: ["bibo:Table"]
  fields:
    caption: dcterms:description
    table_label: rdfs:label
  # Relationships
  relationships:
    paper:
      predicate: dcterms:isPartOf
      inverse: dcterms:hasPart
    rows:
      predicate: dcterms:hasPart
      inverse: dcterms:isPartOf

# TableRowEntity mapping
TableRowEntity:
  rdf:type: ["bibo:Row"]
  fields:
    headers: ex:hasHeader  # Changed from multi_value_fields (headers are typically single string per row)
  multi_value_fields:
    cells: ex:hasCell
  # Relationships
  relationships:
    table:
      predicate: dcterms:isPartOf
      inverse: dcterms:hasPart

# ReferenceEntity mapping
ReferenceEntity:
  rdf:type: ["bibo:Article"]  # More specific than bibo:Document
  # Inherits all fields from ScholarlyWorkEntity
  # No additional fields specific to references
  # Relationships
  relationships:
    citing_paper:
      predicate: cito:isCitedBy
      inverse: cito:cites

# InstitutionEntity mapping
InstitutionEntity:
  rdf:type: ["org:Organization"]
  fields:
    display_name: skos:prefLabel
    ror_id: ror:rorId
    openalex_id: ex:openAlexId
    country: ex:country
    country_code: ex:countryCode
    city: ex:city
    latitude: geo:lat
    longitude: geo:long
    institution_type: org:classification
    grid_id: ex:gridId
    isni: ex:isni
    wikidata_id: ex:wikidataId
    fundref_id: ex:fundrefId
    website: foaf:homepage
    established: ex:establishedYear
  # Multi-value fields
  multi_value_fields:
    domains: ex:domain
  # Relationships
  relationships:
    members:
      predicate: org:hasMember
      inverse: org:memberOf
