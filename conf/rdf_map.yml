# RDF Mapping Configuration for PyEuropePMC Data Models
# 
# This file is the SOURCE OF TRUTH for all RDF mappings.
# The RML file (rml_mappings.ttl) is auto-generated from this YAML.
#
# After editing this file, run: python scripts/sync_rdf_mappings.py
#
# This file defines how entity fields map to RDF predicates.
# URI generation patterns are handled dynamically in RDFMapper._generate_entity_uri()
# (DOI-based for papers, ORCID-based for authors, ROR-based for institutions, etc.)

# Namespace prefixes
_@prefix:
  ex: "http://example.org/"
  dct: "http://purl.org/dc/terms/"
  foaf: "http://xmlns.com/foaf/0.1/"
  bibo: "http://purl.org/ontology/bibo/"
  prov: "http://www.w3.org/ns/prov#"
  rdfs: "http://www.w3.org/2000/01/rdf-schema#"
  nif: "http://persistence.uni-leipzig.org/nlp2rdf/ontologies/nif-core#"
  rdf: "http://www.w3.org/1999/02/22-rdf-syntax-ns#"
  owl: "http://www.w3.org/2002/07/owl#"
  mesh: "http://id.nlm.nih.gov/mesh/"
  obo: "http://purl.obolibrary.org/obo/"
  org: "http://www.w3.org/ns/org#"
  cito: "http://purl.org/spar/cito/"
  datacite: "http://purl.org/spar/datacite/"
  geo: "http://www.w3.org/2003/01/geo/wgs84_pos#"
  ror: "https://ror.org/vocab#"
  skos: "http://www.w3.org/2004/02/skos/core#"

# PaperEntity mapping
PaperEntity:
  rdf:type: ["bibo:AcademicArticle"]
  fields:
    pmcid: dct:identifier
    doi: bibo:doi
    title: dct:title
    journal: bibo:journal
    volume: bibo:volume
    issue: bibo:issue
    pages: bibo:pages
    pub_date: dct:issued
    publication_date: dct:date
    publication_year: dct:date
    abstract: dct:abstract
    citation_count: ex:citationCount
    influential_citation_count: ex:influentialCitationCount
    is_oa: ex:isOpenAccess
    oa_status: ex:openAccessStatus
    oa_url: ex:openAccessUrl
  # Multi-value fields (lists)
  multi_value_fields:
    keywords: dct:subject
    fields_of_study: dct:subject
  # Relationships
  relationships:
    authors:
      predicate: dct:creator
      inverse: foaf:made
    sections:
      predicate: dct:hasPart
      inverse: dct:isPartOf
    references:
      predicate: cito:cites
      inverse: cito:isCitedBy
    tables:
      predicate: dct:hasPart
      inverse: dct:isPartOf

# AuthorEntity mapping
AuthorEntity:
  rdf:type: ["foaf:Person"]
  fields:
    full_name: foaf:name
    name: foaf:name
    first_name: foaf:givenName
    last_name: foaf:familyName
    initials: foaf:initials
    orcid: datacite:orcid
    openalex_id: ex:openAlexId
    affiliation_text: ex:affiliation
    position: ex:authorPosition
    email: foaf:mbox
  # Relationships
  relationships:
    papers:
      predicate: foaf:made
      inverse: dct:creator
    institutions:
      predicate: org:memberOf
      inverse: org:hasMember

# SectionEntity mapping
SectionEntity:
  rdf:type: ["bibo:DocumentPart", "nif:Context"]
  fields:
    title: dct:title
    content: nif:isString
    begin_index: nif:beginIndex
    end_index: nif:endIndex
  # Relationships
  relationships:
    paper:
      predicate: dct:isPartOf
      inverse: dct:hasPart
    subsections:
      predicate: dct:hasPart
      inverse: dct:isPartOf  # TODO: Implement SubsectionEntity or remove if not needed

# TableEntity mapping
TableEntity:
  rdf:type: ["bibo:Table"]
  fields:
    caption: dct:description
    table_label: rdfs:label
  # Relationships
  relationships:
    paper:
      predicate: dct:isPartOf
      inverse: dct:hasPart
    rows:
      predicate: dct:hasPart
      inverse: dct:isPartOf

# TableRowEntity mapping
TableRowEntity:
  rdf:type: ["bibo:Row"]
  fields:
    headers: ex:hasHeader  # Changed from multi_value_fields (headers are typically single string per row)
  multi_value_fields:
    cells: ex:hasCell
  # Relationships
  relationships:
    table:
      predicate: dct:isPartOf
      inverse: dct:hasPart

# ReferenceEntity mapping
ReferenceEntity:
  rdf:type: ["bibo:Document"]
  fields:
    title: dct:title
    source: dct:isPartOf
    year: dct:issued
    volume: bibo:volume
    pages: bibo:pages
    doi: bibo:doi  # NOTE: DOI data often missing in XML (only PMID available)
  # Multi-value fields
  multi_value_fields:
    authors: dct:creator
  # Relationships
  relationships:
    citing_paper:
      predicate: cito:isCitedBy
      inverse: cito:cites

# InstitutionEntity mapping
InstitutionEntity:
  rdf:type: ["org:Organization"]
  fields:
    display_name: skos:prefLabel
    ror_id: ror:rorId
    openalex_id: ex:openAlexId
    country: ex:country
    country_code: ex:countryCode
    city: ex:city
    latitude: geo:lat
    longitude: geo:long
    institution_type: org:classification
    grid_id: ex:gridId
    isni: ex:isni
    wikidata_id: ex:wikidataId
    fundref_id: ex:fundrefId
    website: foaf:homepage
    established: ex:establishedYear
  # Multi-value fields
  multi_value_fields:
    domains: ex:domain
  # Relationships
  relationships:
    members:
      predicate: org:hasMember
      inverse: org:memberOf
